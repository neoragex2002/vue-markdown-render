import{_ as i,c as e,o as a,ag as t}from"./chunks/framework.C0wiDQbp.js";const c=JSON.parse('{"title":"MermaidBlockNode (Component)","description":"","frontmatter":{},"headers":[],"relativePath":"guide/mermaid-block-node.md","filePath":"guide/mermaid-block-node.md"}'),n={name:"guide/mermaid-block-node.md"};function l(h,s,o,p,d,r){return a(),e("div",null,[...s[0]||(s[0]=[t(`<h1 id="mermaidblocknode-component" tabindex="-1">MermaidBlockNode (Component) <a class="header-anchor" href="#mermaidblocknode-component" aria-label="Permalink to &quot;MermaidBlockNode (Component)&quot;">​</a></h1><p><code>MermaidBlockNode</code> is a lightweight, extensible renderer for Mermaid diagrams intended for embedding interactive Mermaid charts within documents. The component supports progressive rendering, source/preview toggling, copying source, exporting SVG, and a pseudo-fullscreen modal (with zoom and drag).</p><h2 id="props-key" tabindex="-1">Props (key) <a class="header-anchor" href="#props-key" aria-label="Permalink to &quot;Props (key)&quot;">​</a></h2><ul><li><code>node: any</code> — the Mermaid code node (required)</li><li><code>isDark?: boolean</code> — dark mode flag</li><li><code>loading?: boolean</code> — initial loading placeholder</li><li><code>maxHeight?: string | null</code> — maximum height</li><li><code>isStrict?: boolean</code> — run Mermaid in <code>securityLevel: &#39;strict&#39;</code> with DOMPurify + HTML-label hardening; use this when rendering untrusted diagrams to strip inline scripts/<code>javascript:</code> URLs that could otherwise leak into the SVG</li><li>Header / control props (all optional, default <code>true</code>): <ul><li><code>showHeader</code>, <code>showModeToggle</code>, <code>showCopyButton</code>, <code>showExportButton</code>, <code>showFullscreenButton</code>, <code>showCollapseButton</code>, <code>showZoomControls</code></li></ul></li></ul><h2 id="slots" tabindex="-1">Slots <a class="header-anchor" href="#slots" aria-label="Permalink to &quot;Slots&quot;">​</a></h2><ul><li><code>header-left</code> — replace the left area (defaults to Mermaid icon + label)</li><li><code>header-center</code> — replace the center area (defaults to preview/source toggle)</li><li><code>header-right</code> — replace the right-side action buttons (take full control of the default controls)</li></ul><h2 id="emits" tabindex="-1">Emits <a class="header-anchor" href="#emits" aria-label="Permalink to &quot;Emits&quot;">​</a></h2><p>The component emits events using a unified <code>MermaidBlockEvent</code> object. Listeners can call <code>preventDefault()</code> on the event to stop the component&#39;s default behavior:</p><ul><li><code>copy</code> — copy button clicked, signature: <code>(ev: MermaidBlockEvent&lt;{ type: &#39;copy&#39;; text: string }&gt;)</code> (call <code>ev.preventDefault()</code> to stop the built-in clipboard write + &quot;Copied&quot; state)</li><li><code>export</code> — export button clicked, signature: <code>(ev: MermaidBlockEvent&lt;{ type: &#39;export&#39; }&gt;)</code></li><li><code>openModal</code> — request to open the pseudo-fullscreen modal, signature: <code>(ev: MermaidBlockEvent&lt;{ type: &#39;openModal&#39; }&gt;)</code></li><li><code>toggleMode</code> — toggle between <code>source</code> and <code>preview</code>, signature: <code>(target: &#39;source&#39; | &#39;preview&#39;, ev: MermaidBlockEvent&lt;{ type: &#39;toggleMode&#39;; target: &#39;source&#39; | &#39;preview&#39; }&gt;)</code></li></ul><h3 id="intercept-example" tabindex="-1">Intercept example <a class="header-anchor" href="#intercept-example" aria-label="Permalink to &quot;Intercept example&quot;">​</a></h3><p>Completely override the component&#39;s default export behavior:</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MermaidBlockEvent } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;../../types/component-props&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onExport</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ev</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> /* MermaidBlockEvent */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ev.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // The component exposes the rendered SVG element on the event as \`svgElement\`.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> svgEl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ev.svgElement </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SVGElement</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">svgEl) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">warn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;No svg element available&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> svgString</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> XMLSerializer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">serializeToString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(svgEl)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  uploadSvg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(svgString)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">MermaidBlockNode</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> @export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;onExport&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><blockquote><p>Note: The event object includes both <code>svgElement</code> (DOM node) and <code>svgString</code> (serialized SVG) on <code>export</code> and <code>openModal</code> events — use whichever is more convenient.</p></blockquote><h2 id="slot-example-—-fully-replace-right-side-controls" tabindex="-1">Slot example — fully replace right-side controls <a class="header-anchor" href="#slot-example-—-fully-replace-right-side-controls" aria-label="Permalink to &quot;Slot example — fully replace right-side controls&quot;">​</a></h2><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">MermaidBlockNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> :</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showExportButton</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;template #header-right&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;button @click=&quot;downloadSvg&quot;&gt;Download&lt;/button&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;button @click=&quot;openCustomModal&quot;&gt;Open custom modal&lt;/button&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/template&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">MermaidBlockNode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h2 id="recommended-usage" tabindex="-1">Recommended usage <a class="header-anchor" href="#recommended-usage" aria-label="Permalink to &quot;Recommended usage&quot;">​</a></h2><ul><li>To implement custom export/upload behavior, call <code>preventDefault()</code> in the <code>export</code> listener and extract the SVG from the rendered DOM in your handler.</li><li>To fully replace the header UI, use the <code>header-*</code> slots and set the corresponding <code>show*</code> props to <code>false</code> to hide the default controls.</li><li>If Mermaid content originates from users/LLMs or any untrusted source, set <code>:is-strict=&quot;true&quot;</code> so the component sanitizes the SVG and disables HTML labels; this closes the gap where crafted <code>javascript:</code> URLs or event handlers could sneak into the rendered output.</li></ul><hr><p>Notes:</p><ul><li><code>svgString</code> is already included in <code>export</code> and <code>openModal</code> event payloads (the serialized SVG string is available on the event), so consumers can upload or post the SVG without re-serializing.</li><li>This page is linked from the docs sidebar and a runnable playground demo is provided in the repo (route: <code>/mermaid-export-demo</code>, file: <code>playground/src/pages/mermaid-export-demo.vue</code>).</li></ul><h2 id="see-also" tabindex="-1">See also <a class="header-anchor" href="#see-also" aria-label="Permalink to &quot;See also&quot;">​</a></h2><ul><li>Override <code>MermaidBlockNode</code> (use <code>setCustomComponents</code> with <code>MarkdownRender</code>): <a href="./mermaid-block-node-override.html">Override MermaidBlockNode in MarkdownRender</a></li></ul><p>Playground demo: there&#39;s a runnable playground page demonstrating how to intercept <code>export</code> and upload <code>ev.svgString</code> — see the playground route <code>mermaid-export-demo</code> (file: <code>playground/src/pages/mermaid-export-demo.vue</code>).</p><p>Try this — quick mermaid example you can paste into a component:</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MarkdownRender </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;markstream-vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> md</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\\`\\\`\\\`</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">mermaid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">graph TD</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">A--&gt;B</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\\`\\\`\\\`\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">MarkdownRender</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;md&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div>`,25)])])}const E=i(n,[["render",l]]);export{c as __pageData,E as default};
