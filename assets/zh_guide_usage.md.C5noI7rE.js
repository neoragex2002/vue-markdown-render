import{_ as i,c as a,o as n,ag as e}from"./chunks/framework.C0wiDQbp.js";const c=JSON.parse('{"title":"使用示例与 API","description":"","frontmatter":{},"headers":[],"relativePath":"zh/guide/usage.md","filePath":"zh/guide/usage.md"}'),t={name:"zh/guide/usage.md"};function l(h,s,p,k,d,r){return n(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="使用示例与-api" tabindex="-1">使用示例与 API <a class="header-anchor" href="#使用示例与-api" aria-label="Permalink to &quot;使用示例与 API&quot;">​</a></h1><p>本页聚焦三个问题：如何在 Vite/VitePress/Nuxt 中集成、解析器如何配合渲染器、样式出错时去哪查看 reset 与 Tailwind/UnoCSS 排障指南。</p><h2 id="选择入口" tabindex="-1">选择入口 <a class="header-anchor" href="#选择入口" aria-label="Permalink to &quot;选择入口&quot;">​</a></h2><ul><li><strong>VitePress</strong> — 在 <code>enhanceApp</code> 中注册 <code>MarkdownRender</code> 与 <code>setCustomComponents</code>，并参考 <a href="/vue-markdown-render/zh/guide/vitepress-docs.html">VitePress 文档指南</a>。</li><li><strong>Vite/Nuxt 应用</strong> — 在组件中引入 <code>MarkdownRender</code>，记得在 reset 之后、<code>@layer components</code> 中导入 <code>markstream-vue/index.css</code>。</li><li><strong>仅解析器</strong> — 使用 <code>getMarkdown()</code> 与 <code>parseMarkdownToStructure()</code> 构建自定义渲染流程或在渲染前做 AST 处理。</li></ul><p>如果需要在既有设计系统里覆盖样式，务必传入 <code>custom-id</code> 并阅读 <a href="/vue-markdown-render/zh/guide/troubleshooting.html#css-looks-wrong-start-here">样式排查清单</a>。</p><h2 id="最小渲染示例" tabindex="-1">最小渲染示例 <a class="header-anchor" href="#最小渲染示例" aria-label="Permalink to &quot;最小渲染示例&quot;">​</a></h2><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MarkdownRender </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;markstream-vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> doc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;# 使用示例</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">支持 **streaming** 渲染。&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">MarkdownRender</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> custom-id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;docs&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;doc&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;modern-css-reset&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@layer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> components {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  @import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;markstream-vue/index.css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="vitepress-自定义标签" tabindex="-1">VitePress + 自定义标签 <a class="header-anchor" href="#vitepress-自定义标签" aria-label="Permalink to &quot;VitePress + 自定义标签&quot;">​</a></h2><p>在 VitePress 中，你只需要在 <code>enhanceApp</code> 里注册一次自定义节点组件，然后在 <code>MarkdownRender</code> 上使用 <code>custom-html-tags</code>，解析器就会自动输出对应的自定义节点。</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MarkdownRender, { setCustomComponents } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;markstream-vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// docs/.vitepress/theme/index.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DefaultTheme </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vitepress/theme&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ThinkingNode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./components/ThinkingNode.vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;markstream-vue/index.css&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  extends: DefaultTheme,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  enhanceApp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    setCustomComponents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;docs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { thinking: ThinkingNode })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-md vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- 在 VitePress 页面里 --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">MarkdownRender</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  custom-id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;docs&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  :custom-html-tags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;[&#39;thinking&#39;]&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  :content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;source&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span></code></pre></div><h2 id="解析流程" tabindex="-1">解析流程 <a class="header-anchor" href="#解析流程" aria-label="Permalink to &quot;解析流程&quot;">​</a></h2><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { getMarkdown, parseMarkdownToStructure } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;markstream-vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> md</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getMarkdown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nodes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseMarkdownToStructure</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;# 标题&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, md)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 将 nodes 传入 &lt;MarkdownRender :nodes=&quot;nodes&quot; /&gt;</span></span></code></pre></div><ul><li><code>getMarkdown(msgId?, options?)</code> 返回预设配置的 <code>markdown-it-ts</code>。</li><li><code>parseMarkdownToStructure()</code> 将 Markdown 字符串/Token 转为渲染器使用的 AST。</li><li>可搭配 <code>setCustomComponents(id?, mapping)</code> 为特定 <code>custom-id</code> 替换节点渲染器。</li></ul><h2 id="组件速览" tabindex="-1">组件速览 <a class="header-anchor" href="#组件速览" aria-label="Permalink to &quot;组件速览&quot;">​</a></h2><p>完整说明参考 <a href="/vue-markdown-render/zh/guide/components.html">组件与节点渲染器</a>：</p><ul><li><code>CodeBlockNode</code> — Monaco 代码块（需要安装 <code>stream-monaco</code>）。</li><li><code>MarkdownCodeBlockNode</code> — 基于 Shiki，适合轻量场景。</li><li><code>MermaidBlockNode</code> — 需要 <code>mermaid</code> ≥ 11 与 CSS。</li><li><code>ImageNode</code> — 通过 <code>click</code>/<code>load</code>/<code>error</code> 事件接管图片预览。</li></ul><h2 id="样式提醒" tabindex="-1">样式提醒 <a class="header-anchor" href="#样式提醒" aria-label="Permalink to &quot;样式提醒&quot;">​</a></h2><ol><li><strong>先 reset</strong> —— <code>modern-css-reset</code>、<code>@tailwind base</code> 或 <code>@unocss/reset</code>，之后再导入库的 CSS。</li><li><strong>使用 CSS layer</strong> —— Tailwind/UnoCSS 项目请在 <code>@layer components { ... }</code> 中导入 <code>markstream-vue/index.css</code>。</li><li><strong>处理 Uno/Tailwind 冲突</strong> —— 参见 <a href="/vue-markdown-render/zh/guide/tailwind.html">Tailwind 指南</a>（包含 UnoCSS 示例）。</li><li><strong>同伴 CSS</strong> —— KaTeX、Mermaid 需要对应的 CSS；Monaco 不需要额外导入 CSS。</li></ol><h2 id="css-作用域-重要" tabindex="-1">CSS 作用域（重要） <a class="header-anchor" href="#css-作用域-重要" aria-label="Permalink to &quot;CSS 作用域（重要）&quot;">​</a></h2><p>本包打包出来的 CSS 会限定在内部 <code>.markstream-vue</code> 容器下（包含 Tailwind 工具类与主题变量），以尽量降低全局冲突风险。</p><ul><li>使用 <code>MarkdownRender</code> 时会自动包含该容器，无需额外处理。</li><li>如果你单独使用导出的节点组件（例如 <code>PreCodeNode</code>、<code>FootnoteNode</code>），请在外层包一层容器：</li></ul><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;markstream-vue&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">PreCodeNode</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">div</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>若仍无法解决，请运行 <code>pnpm play</code> 在 playground 中复现，并附带链接到 issue 中。</p>`,25)])])}const E=i(t,[["render",l]]);export{c as __pageData,E as default};
