import{_ as a,c as i,o as e,ag as n}from"./chunks/framework.C0wiDQbp.js";const c=JSON.parse('{"title":"Nuxt 3 SSR usage (example)","description":"","frontmatter":{},"headers":[],"relativePath":"nuxt-ssr.md","filePath":"nuxt-ssr.md"}'),t={name:"nuxt-ssr.md"};function r(l,s,p,h,o,d){return e(),i("div",null,[...s[0]||(s[0]=[n(`<h1 id="nuxt-3-ssr-usage-example" tabindex="-1">Nuxt 3 SSR usage (example) <a class="header-anchor" href="#nuxt-3-ssr-usage-example" aria-label="Permalink to &quot;Nuxt 3 SSR usage (example)&quot;">​</a></h1><blockquote><p>中文版请查看 <a href="/vue-markdown-render/zh/nuxt-ssr.html">Nuxt 3 SSR（中文）</a>。</p></blockquote><p>This short recipe shows a minimal, safe way to use <code>markstream-vue</code> in Nuxt 3 so that client-only features (Monaco, Mermaid, Web Workers) are only initialized in the browser.</p><h2 id="install-peers-client-side" tabindex="-1">Install peers (client-side) <a class="header-anchor" href="#install-peers-client-side" aria-label="Permalink to &quot;Install peers (client-side)&quot;">​</a></h2><p>Install the peers you need in your Nuxt app. For example, to enable Mermaid and Monaco editor previews (optional):</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># pnpm (recommended)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mermaid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stream-monaco</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># npm</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mermaid</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stream-monaco</span></span></code></pre></div><p>Do NOT import these peers from server-only code paths during SSR.</p><h2 id="example-page-client-only-wrapper" tabindex="-1">Example page (client-only wrapper) <a class="header-anchor" href="#example-page-client-only-wrapper" aria-label="Permalink to &quot;Example page (client-only wrapper)&quot;">​</a></h2><p>Create a page or component that defers mounting the renderer to the client. Nuxt provides a <code>&lt;client-only&gt;</code> built-in wrapper which is perfect:</p><div class="language-vue vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">vue</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> lang</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MarkdownRender </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;markstream-vue&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { ref } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> markdown</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`# Hello from Nuxt 3</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">This content is rendered only on the client.\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">client-only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">MarkdownRender</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> :content</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;markdown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">client-only</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>This ensures the <code>MarkdownRender</code> component (and any optional peers it lazy-loads) are only imported/initialized in the browser.</p><h2 id="server-rendered-diagrams-or-math" tabindex="-1">Server-rendered diagrams or math <a class="header-anchor" href="#server-rendered-diagrams-or-math" aria-label="Permalink to &quot;Server-rendered diagrams or math&quot;">​</a></h2><p>If you need server-rendered HTML for diagrams or math (so crawlers or first paint include them), pre-render those outputs during your build step or via a small server-side task. Example approaches:</p><ul><li>Use a build script that runs <code>mermaid-cli</code> / <code>katex</code> to convert certain diagrams/formulas to HTML/SVG during content generation and embed the resulting HTML into the page.</li><li>Use a server endpoint that returns pre-rendered diagram SVG/HTML and fetch it on the client as needed.</li></ul><p>Then pass pre-rendered fragments into the renderer as trusted HTML or a server-side AST so the client avoids heavy initialization for those artifacts.</p><h2 id="notes" tabindex="-1">Notes <a class="header-anchor" href="#notes" aria-label="Permalink to &quot;Notes&quot;">​</a></h2><ul><li>Prefer <code>client-only</code> when using Monaco Editor, Web Workers, or progressive Mermaid.</li><li>The library is designed to be import-safe during SSR: heavy peers are lazy-loaded in the browser and many DOM/Worker usages are guarded. If you see an import-time ReferenceError, please provide the stack trace.</li></ul><hr><h2 id="nuxt-playground" tabindex="-1">Nuxt playground <a class="header-anchor" href="#nuxt-playground" aria-label="Permalink to &quot;Nuxt playground&quot;">​</a></h2><p>This repository now ships with a Nuxt playground that mirrors the streaming demo from the Vite playground. It lives in <code>playground-nuxt/</code> at the repo root.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> play:nuxt</span></span></code></pre></div><p>The command boots Nuxt 4 (dev server at <code>http://localhost:3000</code>) and renders the same Markdown stream as the main playground, so you can verify SSR, workers, and Tailwind interactions in an actual Nuxt environment. Feel free to copy pieces from that folder when wiring up your own project.</p>`,22)])])}const g=a(t,[["render",r]]);export{c as __pageData,g as default};
